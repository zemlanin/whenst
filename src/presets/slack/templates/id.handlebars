{{>partials_head}}
<body>
  <div id="layout">
    {{#> partials_topbar
      oauth_id=oauth_id
      profile=profile
      team=team
      current_status=current_status

      preset=preset
    }}
      {{#*inline "breadcrumbs"}}
        <li>
          <a href="{{ route "slackPresetsList" oauth_id=oauth_id }}">
            presets
          </a>
        </li>
        <li>
          <a
            href="{{ route "slackPresetId" oauth_id=oauth_id
              ?status_emoji=preset.status_emoji
              ?status_text=preset.status_text }}"
            title="preset"
          >
            ğŸ”—
          </a>
        </li>
      {{/inline}}
    {{/ partials_topbar }}

    <div style="padding: 1em 0.5em 3em 0.5em;">
      <div style="text-align: center;">
        <span class="status" style="font-size: 1.5em;">
          {{>partials_status preset}}
        </span>
      </div>

      <div style="padding: 1em 0.5em 0.5em 0.5em; text-align: center;">
        <form
          style="font-size: 1.5em;"
          method="post"
          action="{{ route "slackPresetUse" oauth_id=@root.oauth_id }}"
          {{#if preset.is_current_status}}disabled{{/if}}
          {{#if preset.unknown_emoji}}disabled{{/if}}
        >
          <input type="hidden" name="_csrf" value="{{@csrfToken}}">
          <input type="hidden" name="status_emoji" value="{{preset.status_emoji}}">
          <input type="hidden" name="status_text" value="{{preset.status_text}}">
          {{#if preset.is_current_status}}
            <button type="submit" class="primary" disabled>current</button>
          {{else}}
            {{#if preset.unknown_emoji}}
              <button type="submit" class="primary" disabled>unknown emoji</button>
            {{else}}
              <button type="submit" class="primary">use</button>
            {{/if}}
          {{/if}}
        </form>
      </div>

      <div style="padding: 0.5em; text-align: center;">
        {{#if preset.already_saved}}
          <form
            method="post"
            action="{{ route "slackPresetDelete" oauth_id=@root.oauth_id }}"
            onsubmit="return confirm('are you sure?')"
          >
            <input type="hidden" name="_csrf" value="{{@csrfToken}}">
            <input type="hidden" name="id" value="{{preset.already_saved.id}}">
            <button type="submit" class="danger">delete</button>
          </form>
        {{else}}
          <form
            style="display: inline-block"
            method="post"
            action="{{ route "slackPresetAdd" oauth_id=@root.oauth_id }}"
          >
            <input type="hidden" name="_csrf" value="{{@csrfToken}}">
            <input type="hidden" name="status_emoji" value="{{preset.status_emoji}}">
            <input type="hidden" name="status_text" value="{{preset.status_text}}">
            <button type="submit">save</button>
          </form>
        {{/if}}
      </div>
    </div>

    {{> partials_footer . }}

  </div>
</body>
