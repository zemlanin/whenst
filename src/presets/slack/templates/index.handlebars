{{>partials_head}}
<body>
  <div id="layout" class="pure-g">
    {{#with activeSlack}}
      {{>partials_topbar
        back_href=""
        user_id=user_id
        profile=profile
        team=team
        current_status=current_status
      }}
    {{/with}}

    <div class="pure-u-1">
      <form
        style="display: flex; padding: 0.5em; flex-directon: row;"
        method="post"
        action="{{ route "slackPresetAdd" user_id=activeSlack.user_id }}"
      >
        <input type="hidden" name="_csrf" value="{{@csrfToken}}">
        <input
          type="text"
          name="status_emoji"
          placeholder="emoji"
          list="emoji_datalist_{{activeSlack.oauth_id}}"
        >
        <input type="text" name="status_text" placeholder="text" style="flex-grow: 1">
        <button type="submit">save</button>
      </form>

      {{#each presets}}
        <form
          class="preset-row"
          method="post"
          action="{{ route "slackPresetUse" user_id=@root.activeSlack.user_id }}"
        >
          <a
            href="{{ route "slackPresetId" user_id=@root.activeSlack.user_id ?status_emoji=status_emoji ?status_text=status_text }}"
          >
            {{>partials_status .}}
          </a>
          <input type="hidden" name="_csrf" value="{{@csrfToken}}">
          <input type="hidden" name="status_emoji" value="{{status_emoji}}">
          <input type="hidden" name="status_text" value="{{status_text}}">
          <button type="submit">use</button>
        </form>
      {{/each}}

      <datalist id="emoji_datalist_{{activeSlack.oauth_id}}">
        {{#each emoji_options}}
          <option value="{{this}}"></option>
        {{/each}}
      </datalist>
    </div>
  </div>
</body>
